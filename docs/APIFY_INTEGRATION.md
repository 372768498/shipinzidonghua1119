# ğŸ•·ï¸ Apifyé›†æˆæŒ‡å—

> ä½¿ç”¨Apifyçˆ¬å–TikTokã€YouTubeã€Instagramçš„ç—…æ¯’å¼è§†é¢‘

---

## ğŸ“‘ ç›®å½•

1. [Apifyç®€ä»‹](#1-apifyç®€ä»‹)
2. [æ”¯æŒçš„å¹³å°](#2-æ”¯æŒçš„å¹³å°)
3. [é…ç½®Apify](#3-é…ç½®apify)
4. [TikTokçˆ¬è™«](#4-tiktokçˆ¬è™«)
5. [YouTubeçˆ¬è™«](#5-youtubeçˆ¬è™«)
6. [Instagramçˆ¬è™«](#6-instagramçˆ¬è™«)
7. [çˆ¬è™«æœ€ä½³å®è·µ](#7-çˆ¬è™«æœ€ä½³å®è·µ)
8. [æˆæœ¬ä¼˜åŒ–](#8-æˆæœ¬ä¼˜åŒ–)
9. [å¸¸è§é—®é¢˜](#9-å¸¸è§é—®é¢˜)

---

## 1. Apifyç®€ä»‹

### ä»€ä¹ˆæ˜¯Apify?

Apifyæ˜¯ä¸€ä¸ªäº‘ç«¯ç½‘é¡µæŠ“å–å’Œè‡ªåŠ¨åŒ–å¹³å°ï¼Œæä¾›:
- ğŸš€ **ç°æˆçš„çˆ¬è™«** (Actors): æ— éœ€ç¼–å†™çˆ¬è™«ä»£ç 
- ğŸ”„ **å®šæ—¶ä»»åŠ¡**: è‡ªåŠ¨ç›‘æ§çƒ­é—¨å†…å®¹
- ğŸ“Š **æ•°æ®å¯¼å‡º**: JSONã€CSVã€Excelç­‰æ ¼å¼
- ğŸ’° **æŒ‰éœ€ä»˜è´¹**: åªä¸ºä½¿ç”¨çš„èµ„æºä»˜è´¹

### ä¸ºä»€ä¹ˆé€‰æ‹©Apify?

| å¯¹æ¯”é¡¹ | è‡ªå»ºçˆ¬è™« | Apify |
|--------|----------|-------|
| **å¼€å‘æ—¶é—´** | 2-4å‘¨ | å³åˆ»å¯ç”¨ |
| **ç»´æŠ¤æˆæœ¬** | æŒç»­ç»´æŠ¤ | é›¶ç»´æŠ¤ |
| **IPå°ç¦** | éœ€è¦ä»£ç†æ±  | è‡ªåŠ¨å¤„ç† |
| **å¯é æ€§** | ä¸ç¨³å®š | 99.9%å¯ç”¨æ€§ |
| **æˆæœ¬** | æœåŠ¡å™¨+äººåŠ› | $49/æœˆèµ· |

---

## 2. æ”¯æŒçš„å¹³å°

### TikTok

**Actor**: `apify/tiktok-scraper`

**èƒ½åŠ›**:
- âœ… æœç´¢å…³é”®è¯è§†é¢‘
- âœ… çˆ¬å–ç”¨æˆ·ä¸»é¡µè§†é¢‘
- âœ… çˆ¬å–è¯é¢˜æ ‡ç­¾è§†é¢‘
- âœ… è·å–è¯„è®ºå’Œç”¨æˆ·ä¿¡æ¯

**é™åˆ¶**:
- æ¯æ¬¡è¿è¡Œæœ€å¤š1000æ¡ç»“æœ
- ä¸åŒ…å«è§†é¢‘æ–‡ä»¶ï¼ˆä»…å…ƒæ•°æ®ï¼‰

---

### YouTube

**Actor**: `apify/youtube-scraper`

**èƒ½åŠ›**:
- âœ… æœç´¢è§†é¢‘
- âœ… çˆ¬å–é¢‘é“è§†é¢‘
- âœ… çˆ¬å–æ’­æ”¾åˆ—è¡¨
- âœ… è·å–è¯„è®ºå’Œå­—å¹•

**é™åˆ¶**:
- æ¯æ¬¡è¿è¡Œæœ€å¤š500æ¡ç»“æœ
- é€Ÿç‡é™åˆ¶: 100è¯·æ±‚/åˆ†é’Ÿ

---

### Instagram

**Actor**: `apify/instagram-scraper`

**èƒ½åŠ›**:
- âœ… æœç´¢è¯é¢˜æ ‡ç­¾
- âœ… çˆ¬å–ç”¨æˆ·Reels
- âœ… è·å–å¸–å­äº’åŠ¨æ•°æ®

**é™åˆ¶**:
- éœ€è¦Instagramç™»å½•å‡­è¯
- å®¹æ˜“è§¦å‘é€Ÿç‡é™åˆ¶

---

## 3. é…ç½®Apify

### 3.1 åˆ›å»ºè´¦å·

1. è®¿é—® https://apify.com/sign-up
2. é€‰æ‹©å…è´¹å¥—é¤ï¼ˆ$5å…è´¹é¢åº¦ï¼‰
3. éªŒè¯é‚®ç®±

### 3.2 è·å–API Token

1. è®¿é—® https://console.apify.com/account/integrations
2. ç‚¹å‡»ã€ŒCreate new tokenã€
3. å¤åˆ¶Token:

```bash
apify_api_xxxxxxxxxxxxxxxxxxxxxxxx
```

4. æ·»åŠ åˆ° `.env.local`:

```bash
APIFY_API_TOKEN=apify_api_xxxxxxxxxxxxxxxxxxxxxxxx
```

### 3.3 å®‰è£…Apify Client

```bash
npm install apify-client
```

---

## 4. TikTokçˆ¬è™«

### 4.1 åŸºç¡€ç”¨æ³•

```typescript
import { ApifyClient } from 'apify-client'

const client = new ApifyClient({
  token: process.env.APIFY_API_TOKEN,
})

// å¯åŠ¨TikTokçˆ¬è™«
const run = await client.actor('apify/tiktok-scraper').call({
  hashtags: ['AI', 'productivity'],
  resultsPerPage: 50,
  shouldDownloadCovers: false,
  shouldDownloadVideos: false,
})

// è·å–ç»“æœ
const { items } = await client.dataset(run.defaultDatasetId).listItems()

console.log('æ‰¾åˆ°è§†é¢‘:', items.length)
```

---

### 4.2 é«˜çº§é…ç½®

```typescript
const input = {
  // æœç´¢æ–¹å¼ï¼ˆä¸‰é€‰ä¸€ï¼‰
  hashtags: ['AIå·¥å…·', 'ç”Ÿäº§åŠ›'],        // é€šè¿‡è¯é¢˜æ ‡ç­¾
  // profiles: ['username1', 'username2'],  // é€šè¿‡ç”¨æˆ·å
  // urls: ['https://www.tiktok.com/@user/video/123'],  // ç›´æ¥URL

  // ç»“æœæ•°é‡
  resultsPerPage: 100,  // æ¯ä¸ªè¯é¢˜æœ€å¤š100æ¡

  // æ˜¯å¦ä¸‹è½½
  shouldDownloadCovers: false,  // ä¸ä¸‹è½½å°é¢å›¾ï¼ˆèŠ‚çœæˆæœ¬ï¼‰
  shouldDownloadVideos: false,  // ä¸ä¸‹è½½è§†é¢‘æ–‡ä»¶ï¼ˆä»…å…ƒæ•°æ®ï¼‰
  shouldDownloadSubtitles: false,

  // ä»£ç†è®¾ç½®
  proxyConfiguration: {
    useApifyProxy: true,  // ä½¿ç”¨Apifyå†…ç½®ä»£ç†
    apifyProxyGroups: ['RESIDENTIAL'],  // ä½å®…IPï¼ˆæ›´å¯é ä½†è´µï¼‰
  },
}

const run = await client.actor('apify/tiktok-scraper').call(input)
```

---

### 4.3 è¿”å›æ•°æ®æ ¼å¼

```json
{
  "id": "7123456789012345678",
  "text": "10ä¸ªAIå·¥å…·è®©ä½ æ•ˆç‡ç¿»å€ #AI #ç”Ÿäº§åŠ›",
  "createTime": "2024-11-15T10:30:00Z",
  "authorMeta": {
    "id": "123456",
    "name": "techguru",
    "nickName": "Tech Guru",
    "verified": true,
    "signature": "åˆ†äº«æœ€æ–°ç§‘æŠ€",
    "avatar": "https://...",
    "following": 500,
    "fans": 125000,
    "heart": 3500000,
    "video": 450
  },
  "musicMeta": {
    "musicId": "7123456789",
    "musicName": "original sound",
    "musicAuthor": "techguru"
  },
  "hashtags": [
    { "id": "1", "name": "AI" },
    { "id": "2", "name": "ç”Ÿäº§åŠ›" }
  ],
  "videoMeta": {
    "duration": 45,
    "width": 1080,
    "height": 1920
  },
  "diggCount": 85000,     // ç‚¹èµæ•°
  "shareCount": 12000,    // åˆ†äº«æ•°
  "playCount": 1250000,   // æ’­æ”¾æ•°
  "commentCount": 3200,   // è¯„è®ºæ•°
  "webVideoUrl": "https://www.tiktok.com/@techguru/video/7123456789012345678",
  "covers": {
    "default": "https://...",
    "dynamic": "https://..."
  }
}
```

---

### 4.4 è®¡ç®—çˆ†æ¬¾è¯„åˆ†

```typescript
function calculateViralScore(video: any): number {
  const { playCount, diggCount, shareCount, commentCount } = video
  
  // äº’åŠ¨ç‡
  const engagementRate = 
    ((diggCount + commentCount + shareCount) / playCount) * 100
  
  // åˆ†äº«ç‡ï¼ˆç—…æ¯’å¼ä¼ æ’­çš„å…³é”®æŒ‡æ ‡ï¼‰
  const shareRate = (shareCount / playCount) * 100
  
  // è¯„åˆ†ç®—æ³•
  const score = 
    Math.log10(playCount) * 40 +      // æ’­æ”¾é‡ï¼ˆå¯¹æ•°ç¼©æ”¾ï¼‰
    engagementRate * 30 +             // äº’åŠ¨ç‡
    shareRate * 100 * 20 +            // åˆ†äº«ç‡ï¼ˆæ”¾å¤§100å€ï¼‰
    Math.log10(diggCount) * 10        // ç‚¹èµæ•°
  
  return Math.min(Math.round(score), 100)  // 0-100åˆ†
}

// ä½¿ç”¨
const videos = items.map(video => ({
  ...video,
  viralScore: calculateViralScore(video)
}))

// æŒ‰è¯„åˆ†æ’åº
videos.sort((a, b) => b.viralScore - a.viralScore)
```

---

### 4.5 è¿‡æ»¤é«˜è´¨é‡è§†é¢‘

```typescript
function filterHighQualityVideos(videos: any[]) {
  return videos.filter(video => {
    const engagementRate = 
      ((video.diggCount + video.commentCount + video.shareCount) / 
       video.playCount) * 100
    
    return (
      // æ’­æ”¾é‡: 1ä¸‡-1000ä¸‡ï¼ˆæ’é™¤å‡æ•°æ®å’Œè¶…çº§å¤§å·ï¼‰
      video.playCount >= 10000 && video.playCount <= 10000000 &&
      
      // äº’åŠ¨ç‡: å¤§äº5%
      engagementRate > 5 &&
      
      // è§†é¢‘æ—¶é•¿: 15-60ç§’ï¼ˆçŸ­è§†é¢‘é»„é‡‘æ—¶é•¿ï¼‰
      video.videoMeta.duration >= 15 && video.videoMeta.duration <= 60 &&
      
      // æœ€è¿‘7å¤©å†…å‘å¸ƒ
      new Date(video.createTime) > new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)
    )
  })
}
```

---

## 5. YouTubeçˆ¬è™«

### 5.1 åŸºç¡€ç”¨æ³•

```typescript
const run = await client.actor('apify/youtube-scraper').call({
  searchKeywords: 'AI tools',
  maxResults: 50,
  uploadDate: 'week',  // today | week | month | year
})

const { items } = await client.dataset(run.defaultDatasetId).listItems()
```

---

### 5.2 é«˜çº§é…ç½®

```typescript
const input = {
  // æœç´¢æ–¹å¼ï¼ˆä¸‰é€‰ä¸€ï¼‰
  searchKeywords: 'AI productivity tools',  // å…³é”®è¯æœç´¢
  // channelUrls: ['https://www.youtube.com/c/channelname'],  // é¢‘é“
  // playlistUrls: ['https://www.youtube.com/playlist?list=xxx'],  // æ’­æ”¾åˆ—è¡¨

  // ç»“æœæ•°é‡
  maxResults: 100,

  // æ—¶é—´èŒƒå›´
  uploadDate: 'week',  // today | week | month | year | all

  // è§†é¢‘æ—¶é•¿
  videoDuration: 'short',  // short (< 4min) | medium (4-20min) | long (> 20min)

  // æ’åºæ–¹å¼
  sortBy: 'relevance',  // relevance | date | viewCount | rating

  // æ˜¯å¦è·å–å­—å¹•
  subtitlesLanguage: 'en',  // è¯­è¨€ä»£ç 

  // ä»£ç†
  proxyConfiguration: {
    useApifyProxy: true,
  },
}

const run = await client.actor('apify/youtube-scraper').call(input)
```

---

### 5.3 è¿”å›æ•°æ®æ ¼å¼

```json
{
  "id": "dQw4w9WgXcQ",
  "title": "10 AI Tools That Will Change Your Life in 2024",
  "description": "In this video, I share...",
  "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
  "thumbnailUrl": "https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",
  "uploadDate": "2024-11-15",
  "duration": "10:24",
  "viewCount": 125000,
  "likeCount": 8500,
  "dislikeCount": null,  // YouTubeå·²éšè—
  "commentCount": 320,
  "channelName": "Tech Productivity",
  "channelId": "UCxxxxxxxxxxxxx",
  "channelUrl": "https://www.youtube.com/channel/UCxxxxxxxxxxxxx",
  "subscriberCount": 450000,
  "tags": ["AI", "productivity", "tools", "2024"],
  "category": "Science & Technology"
}
```

---

### 5.4 è®¡ç®—YouTubeçˆ†æ¬¾è¯„åˆ†

```typescript
function calculateYoutubeViralScore(video: any): number {
  const { viewCount, likeCount, commentCount } = video
  
  // äº’åŠ¨ç‡ï¼ˆYouTubeæ²¡æœ‰åˆ†äº«æ•°ï¼‰
  const engagementRate = 
    ((likeCount + commentCount) / viewCount) * 100
  
  // è¯„è®ºç‡ï¼ˆé«˜è¯„è®ºç‡è¯´æ˜è¯é¢˜æ€§å¼ºï¼‰
  const commentRate = (commentCount / viewCount) * 100
  
  // è¯„åˆ†ç®—æ³•
  const score = 
    Math.log10(viewCount) * 40 +
    engagementRate * 35 +
    commentRate * 200 * 25  // è¯„è®ºç‡æƒé‡æ›´é«˜
  
  return Math.min(Math.round(score), 100)
}
```

---

## 6. Instagramçˆ¬è™«

### 6.1 åŸºç¡€ç”¨æ³•

```typescript
const run = await client.actor('apify/instagram-scraper').call({
  hashtags: ['ai', 'productivity'],
  resultsLimit: 50,
})

const { items } = await client.dataset(run.defaultDatasetId).listItems()
```

---

### 6.2 é«˜çº§é…ç½®

âš ï¸ **æ³¨æ„**: Instagramçˆ¬è™«éœ€è¦ç™»å½•å‡­è¯ï¼Œæ›´å®¹æ˜“è¢«å°ç¦ã€‚

```typescript
const input = {
  // æœç´¢æ–¹å¼
  hashtags: ['aitools', 'productivity'],
  // username: ['user1', 'user2'],
  // directUrls: ['https://www.instagram.com/p/xxxxx/'],

  // ç»“æœæ•°é‡
  resultsLimit: 50,

  // ç™»å½•å‡­è¯ï¼ˆå¯é€‰ä½†æ¨èï¼‰
  loginCookies: [
    {
      name: 'sessionid',
      value: 'your_session_id_here',
    },
  ],

  // ä»£ç†
  proxyConfiguration: {
    useApifyProxy: true,
    apifyProxyGroups: ['RESIDENTIAL'],  // å¿…é¡»ä½¿ç”¨ä½å®…IP
  },
}

const run = await client.actor('apify/instagram-scraper').call(input)
```

---

## 7. çˆ¬è™«æœ€ä½³å®è·µ

### 7.1 éµå®ˆrobots.txt

```typescript
// Apifyè‡ªåŠ¨éµå®ˆrobots.txtï¼Œæ— éœ€é¢å¤–é…ç½®
// ä½†å»ºè®®è®¾ç½®åˆç†çš„è¯·æ±‚é—´éš”

const input = {
  // ...
  proxyConfiguration: {
    useApifyProxy: true,
  },
  // è¯·æ±‚é—´éš”ï¼ˆç§’ï¼‰
  requestDelay: 2,  // 2ç§’/è¯·æ±‚
}
```

---

### 7.2 å¤„ç†é€Ÿç‡é™åˆ¶

```typescript
async function runScraperWithRetry(
  actorId: string,
  input: any,
  maxRetries = 3
) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      const run = await client.actor(actorId).call(input)
      
      // æ£€æŸ¥è¿è¡ŒçŠ¶æ€
      if (run.status === 'SUCCEEDED') {
        return await client.dataset(run.defaultDatasetId).listItems()
      }
      
      // å¦‚æœå¤±è´¥ï¼Œç­‰å¾…åé‡è¯•
      console.log(`å°è¯• ${i + 1}/${maxRetries} å¤±è´¥ï¼Œç­‰å¾…é‡è¯•...`)
      await new Promise(resolve => setTimeout(resolve, 5000 * (i + 1)))
      
    } catch (error) {
      if (i === maxRetries - 1) throw error
    }
  }
}
```

---

### 7.3 ç›‘æ§çˆ¬è™«è¿è¡Œ

```typescript
async function monitorActorRun(runId: string) {
  while (true) {
    const run = await client.run(runId).get()
    
    console.log(`çŠ¶æ€: ${run.status}, è¿›åº¦: ${run.stats.requestsFinished}/${run.stats.requestsTotal}`)
    
    if (['SUCCEEDED', 'FAILED', 'ABORTED'].includes(run.status)) {
      break
    }
    
    await new Promise(resolve => setTimeout(resolve, 5000))  // 5ç§’æ£€æŸ¥ä¸€æ¬¡
  }
  
  return run
}

// ä½¿ç”¨
const run = await client.actor('apify/tiktok-scraper').start(input)
const result = await monitorActorRun(run.id)
```

---

### 7.4 å®šæ—¶çˆ¬å–

```typescript
// åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©æ—©ä¸Š9ç‚¹ï¼‰
const schedule = await client.schedules().create({
  name: 'Daily TikTok Scraping',
  isEnabled: true,
  cronExpression: '0 9 * * *',  // æ¯å¤©9:00
  actions: [{
    type: 'RUN_ACTOR',
    actorId: 'apify/tiktok-scraper',
    input: {
      hashtags: ['AI', 'productivity'],
      resultsPerPage: 50,
    },
  }],
})

console.log('å®šæ—¶ä»»åŠ¡åˆ›å»ºæˆåŠŸ:', schedule.id)
```

---

## 8. æˆæœ¬ä¼˜åŒ–

### 8.1 Apifyå®šä»·

**å…è´¹å¥—é¤**:
- $5å…è´¹é¢åº¦
- é€‚åˆæµ‹è¯•å’Œå°è§„æ¨¡ä½¿ç”¨

**ä»˜è´¹å¥—é¤**:
- Starter: $49/æœˆ ($50é¢åº¦)
- Team: $499/æœˆ ($500é¢åº¦)
- Enterprise: å®šåˆ¶

**è®¡è´¹æ–¹å¼**:
```
æˆæœ¬ = è®¡ç®—å•å…ƒ (CU) Ã— å•ä»·

1 CU = 1 CPUæ ¸å¿ƒ Ã— 1GBå†…å­˜ Ã— 1å°æ—¶
å•ä»· = $0.40/CU

ç¤ºä¾‹:
çˆ¬å–100ä¸ªTikTokè§†é¢‘ â‰ˆ 0.02 CU â‰ˆ $0.008
çˆ¬å–100ä¸ªYouTubeè§†é¢‘ â‰ˆ 0.03 CU â‰ˆ $0.012
```

---

### 8.2 é™ä½æˆæœ¬çš„æŠ€å·§

#### 1. åªçˆ¬å–å…ƒæ•°æ®

```typescript
const input = {
  hashtags: ['AI'],
  resultsPerPage: 50,
  shouldDownloadCovers: false,   // ä¸ä¸‹è½½å°é¢
  shouldDownloadVideos: false,   // ä¸ä¸‹è½½è§†é¢‘
  shouldDownloadSubtitles: false,  // ä¸ä¸‹è½½å­—å¹•
}

// æˆæœ¬é™ä½: 70%
```

---

#### 2. ä½¿ç”¨æ›´ä¾¿å®œçš„ä»£ç†

```typescript
const input = {
  // ...
  proxyConfiguration: {
    useApifyProxy: true,
    apifyProxyGroups: ['SHADER'],  // æ•°æ®ä¸­å¿ƒIPï¼ˆä¾¿å®œä½†å¯èƒ½è¢«å°ï¼‰
    // apifyProxyGroups: ['RESIDENTIAL'],  // ä½å®…IPï¼ˆè´µä½†æ›´å¯é ï¼‰
  },
}

// æˆæœ¬é™ä½: 50%ï¼ˆå¦‚æœä¸è¢«å°ï¼‰
```

---

#### 3. å‡å°‘çˆ¬å–é¢‘ç‡

```typescript
// ä¸è¦æ¯å°æ—¶çˆ¬å–ï¼Œæ”¹ä¸ºæ¯å¤©çˆ¬å–
const schedule = await client.schedules().create({
  cronExpression: '0 9 * * *',  // æ¯å¤©1æ¬¡
  // è€Œä¸æ˜¯ '0 * * * *',  // æ¯å°æ—¶1æ¬¡
})

// æˆæœ¬é™ä½: 95%
```

---

#### 4. è®¾ç½®ç»“æœä¸Šé™

```typescript
const input = {
  hashtags: ['AI'],
  resultsPerPage: 20,  // åªçˆ¬20æ¡ï¼Œè€Œä¸æ˜¯100æ¡
}

// æˆæœ¬é™ä½: 80%
```

---

### 8.3 æˆæœ¬ç›‘æ§

```typescript
// è·å–è´¦æˆ·ä½™é¢
const account = await client.user().get()
console.log('å‰©ä½™é¢åº¦:', account.usage.monthlyUsageUsd)

// è·å–Actorè¿è¡Œæˆæœ¬
const run = await client.run(runId).get()
console.log('æœ¬æ¬¡è¿è¡Œæˆæœ¬:', run.usage.computeUnits * 0.40, 'USD')

// è®¾ç½®é¢„ç®—å‘Šè­¦
if (account.usage.monthlyUsageUsd > 40) {  // $50å¥—é¤çš„80%
  console.warn('âš ï¸ æœ¬æœˆé¢åº¦å³å°†ç”¨å°½ï¼')
  // å‘é€å‘Šè­¦é‚®ä»¶
}
```

---

## 9. å¸¸è§é—®é¢˜

### Q1: çˆ¬è™«å¤±è´¥ï¼Œæ˜¾ç¤º"CAPTCHA detected"

**åŸå› **: 
ç›®æ ‡ç½‘ç«™æ£€æµ‹åˆ°çˆ¬è™«è¡Œä¸ºï¼Œè¦æ±‚äººæœºéªŒè¯ã€‚

**è§£å†³æ–¹æ¡ˆ**:
```typescript
const input = {
  // ...
  proxyConfiguration: {
    useApifyProxy: true,
    apifyProxyGroups: ['RESIDENTIAL'],  // ä½¿ç”¨ä½å®…IP
  },
  requestDelay: 3,  // å¢åŠ è¯·æ±‚é—´éš”
}
```

---

### Q2: TikTokè¿”å›æ•°æ®ä¸ºç©º

**åŸå› **:
1. è¯é¢˜æ ‡ç­¾ä¸å­˜åœ¨
2. åœ°åŒºé™åˆ¶
3. TikTok APIå˜æ›´

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// 1. æ£€æŸ¥è¯é¢˜æ ‡ç­¾æ˜¯å¦æ­£ç¡®
const input = {
  hashtags: ['ai'],  // å°å†™ï¼Œæ— #ç¬¦å·
}

// 2. ä½¿ç”¨ç‰¹å®šåœ°åŒºä»£ç†
const input = {
  proxyConfiguration: {
    useApifyProxy: true,
    apifyProxyCountry: 'US',  // ç¾å›½ä»£ç†
  },
}
```

---

### Q3: YouTubeæœç´¢ç»“æœä¸å‡†ç¡®

**åŸå› **:
YouTubeæœç´¢ç®—æ³•å¤æ‚ï¼Œå—ç”¨æˆ·å†å²å½±å“ã€‚

**è§£å†³æ–¹æ¡ˆ**:
```typescript
const input = {
  searchKeywords: 'AI tools 2024',  // æ›´å…·ä½“çš„å…³é”®è¯
  sortBy: 'viewCount',  // æŒ‰æ’­æ”¾é‡æ’åº
  uploadDate: 'week',   // é™åˆ¶æ—¶é—´èŒƒå›´
}
```

---

### Q4: Instagramç™»å½•å‡­è¯è¿‡æœŸ

**åŸå› **:
Instagram Session IDæœ‰æ•ˆæœŸçŸ­ã€‚

**è§£å†³æ–¹æ¡ˆ**:
1. å®šæœŸæ›´æ–°Session ID
2. ä½¿ç”¨å¤šä¸ªè´¦å·è½®æ¢
3. è€ƒè™‘ä½¿ç”¨TikTok/YouTubeä»£æ›¿ï¼ˆæ›´ç¨³å®šï¼‰

---

### Q5: æˆæœ¬è¶…å‡ºé¢„ç®—

**åŸå› **:
- ä¸‹è½½äº†å¤§é‡è§†é¢‘æ–‡ä»¶
- ä½¿ç”¨äº†æ˜‚è´µçš„ä½å®…ä»£ç†
- çˆ¬å–é¢‘ç‡è¿‡é«˜

**è§£å†³æ–¹æ¡ˆ**:
å‚è€ƒ [æˆæœ¬ä¼˜åŒ–](#8-æˆæœ¬ä¼˜åŒ–) ç« èŠ‚ã€‚

---

## 10. è¿›é˜¶æŠ€å·§

### 10.1 çˆ¬å–åè‡ªåŠ¨åˆ†æ

```typescript
import { GoogleGenerativeAI } from '@google/generative-ai'

const genAI = new GoogleGenerativeAI(process.env.GOOGLE_GEMINI_API_KEY!)

async function analyzeViralVideo(video: any) {
  const model = genAI.getGenerativeModel({ model: 'gemini-pro' })
  
  const prompt = `
åˆ†æè¿™ä¸ªTikTokè§†é¢‘ä¸ºä»€ä¹ˆä¼šç«:

æ ‡é¢˜: ${video.text}
æ’­æ”¾é‡: ${video.playCount}
ç‚¹èµ: ${video.diggCount}
è¯„è®º: ${video.commentCount}
åˆ†äº«: ${video.shareCount}
è¯é¢˜: ${video.hashtags.map(h => h.name).join(', ')}

è¯·ä»ä»¥ä¸‹è§’åº¦åˆ†æ:
1. å†…å®¹å®šä½
2. æƒ…ç»ªå…±é¸£
3. ä¼ æ’­æœºåˆ¶
4. å¯å¤åˆ¶è¦ç´ 
  `
  
  const result = await model.generateContent(prompt)
  return result.response.text()
}
```

---

### 10.2 è‡ªåŠ¨ç”Ÿæˆè§†é¢‘è„šæœ¬

```typescript
async function generateScriptFromViral(video: any) {
  const model = genAI.getGenerativeModel({ model: 'gemini-pro' })
  
  const prompt = `
åŸºäºè¿™ä¸ªçˆ†æ¬¾TikTokè§†é¢‘ï¼Œç”Ÿæˆä¸€ä¸ªç›¸ä¼¼ä½†ä¸æŠ„è¢­çš„è§†é¢‘è„šæœ¬:

åŸè§†é¢‘æ ‡é¢˜: ${video.text}
åŸè§†é¢‘æ•°æ®: ${video.playCount}æ’­æ”¾, ${video.diggCount}ç‚¹èµ

è¦æ±‚:
1. ä¿æŒç›¸åŒçš„ä¸»é¢˜å’Œé£æ ¼
2. åˆ›é€ æ€§åœ°æ”¹ç¼–å†…å®¹
3. æ—¶é•¿æ§åˆ¶åœ¨45ç§’
4. åŒ…å«3-5ä¸ªå…³é”®é•œå¤´æè¿°
  `
  
  const result = await model.generateContent(prompt)
  return result.response.text()
}
```

---

<div align="center">

**æ–‡æ¡£ç‰ˆæœ¬**: V1.0  
**æœ€åæ›´æ–°**: 2024-11-19

[è¿”å›ç›®å½•](#-ç›®å½•) | [æŸ¥çœ‹APIæ–‡æ¡£](./API.md) | [æŸ¥çœ‹å¿«é€Ÿå¼€å§‹](./QUICKSTART.md)

</div>